#get and clean project run_analysis_R# following code will downlaod the zip file from httpsurl="https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip"download.file(url,destfile="\\\\USREPFIL01/U292859$/Documents/dataset1.zip")# then unzip the zip filesunzip ("dataset.zip", exdir = "\\\\USREPFIL01/U292859$/Documents/dataset")# list the files that unzipedlist.files(path="\\\\USREPFIL01/U292859$/Documents/dataset")list.files(path="\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset", recursive = TRUE)#read data from the files into the variables# following read activity filesactivitytest<-read.table ("\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset/test/y_test.txt" ,sep="", header = FALSE)str(activitytest)activitytrain<-read.table ("\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset/train/y_train.txt", sep="", header = FALSE)str(activitytrain)# read features filesfeaturetrain<-read.table ("\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset/train/X_train.txt" ,sep="", header = FALSE)feacturetest<-read.table ("\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset/test/X_test.txt",sep="", header = FALSE)str(featuretrain) str(feacturetest) # follwoing read the subject filessubjecttrain<-read.table ("\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset/train/subject_train.txt" ,sep="", header = FALSE)subjecttest<-read.table ("\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset/test/subject_test.txt" ,sep="", header = FALSE)str(subjecttrain)str(subjecttest)head(subjecttrain)tail(subjecttrain)head(subjecttest)tail(subjecttest)# concatenate the data by rowssubject<-rbind(subjecttrain,subjecttest)head(subject)tail(subject)activity<-rbind(activitytrain,activitytest)head(activity)tail(activity)feature<-rbind(featuretrain,feacturetest)head(feature)tail(feature)#set names to variablesnames(subject)<-c("subject")names(activity)<-c("activity")featurenames<-read.table ("\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset/features.txt", sep="", header = FALSE)Â  head(featurenames)names(feature)<-featurenames$V2# 1. merge colomns from the datatable to get all datadatasubac<-cbind(subject,activity)data<-cbind(datasubac,feature)head(data)str(data)#2. Extract only the measurements on the mean and standard deviation for each measurement#subset feacture names by measurement cotain mean and stdsubfeacturenames<-names(feature)[grep("mean\\(\\)|std\\(\\)",featurenames$V2)]head(subfeacturenames)# subset data frame data by selected names of featuresselectnames<-c(as.character(subfeacturenames),"subject","activity")data<-subset(data,select=selectnames)str(data)#3 use descriptive activity names to name the activity in the data set#read the activity label fileactivitylables<-read.table ("\\\\USREPFIL01/U292859$/Documents/dataset/UCI HAR Dataset/activity_labels.txt", sep="", header = FALSE)activitylables# following code merge the activity code with activity label.newdata<-merge(data, activitylables, by.x = "activity", by.y = "V1")library(data.table)setnames(newdata, "V2", "activity")head(newdata$"activity",30)head(newdata$"activity")str(newdata)#4, Apppropriateleylable the data set with descriptive variable namesnames(newdata)<-gsub("^t", "time", names(newdata))names(newdata)<-gsub("^f", "frequency", names(newdata))names(newdata)<-gsub("Acc", "Accelerometer", names(newdata))names(newdata)<-gsub("Gyro", "Gyroscope", names(newdata))names(newdata)<-gsub("Mag", "Magnitude", names(newdata))names(newdata)<-gsub("BodyBody", "Body", names(newdata))#5 from the dataset in step 4, create a second, independent tidy data set with average of each variable for each activity and each subjectlibrary(plyr)data2<-aggregate(. ~subject + activity, newdata, mean)data2<-data2[order(data2$subject,data2$activity),]write.table(data2, file = "tidydata.txt",row.name=FALSE)# create code bookcodebook(newdata)library(knitr)knit2html("codebook.Rmd");
